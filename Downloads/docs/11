Summary of this presentation  The Ingest & Distribution Platform (IDP) has 2 major components & 2 supporting  components:  • Data Ingestor (DI) takes (external) ingested Party data, reformatting & enriching it into an  ING format. Its Implementation is done by the Data Management tribe.  • Data Distributor (DD) makes changed & new “Core” Party data available to ING Groups’  Party Data platform, OnePAM, & associated “Local” Party attribute data to MADP. Its  implementation is done by Customer Data tribe. It is supported by:  • The Data Refresher (DRF)* transforms a full data set of external ingested Party data  into a smaller data set that only contains changes with the OnePAM & MADP  External (Landing) zones for upload in those zones.  • The Data Reconciler (DRC)* compares data for which the External (Landing) Zones of  OnePAM & MADP are master with data in the Main Zones of OnePAM & MADP and  creates extracts that only contains differences between them for updating the Main  zones.  We focus on the Data Distributor which manages 2 distinct phases:  1. Upload: the ING normalized ingested Party data into the OnePAM & MADP External  zones, consumable by Customer Onboarding journeys.  2. Update: extract Involved Party data updates from ingested Party data that is uploaded in  the OnePAM & MADP External zones and update different attributes into the OnePAM  &MADP Main zones.  3  * DRF and DRC use extracts from copies of OnePAM and MADP in the Unite Data Lake to support their activities, rather than the operational OnePAM and MADP systems themselves Table of Content  1. Context & environment  2. Constraints & mitigation strategies  • Environmental constraints  • Mitigation strategies  3. High-level Architecture  • Data Distributor  • Data Refresher & Reconciler intro  • Data Refresher  • Data Reconciler  4. Architecture decisions, risks & open points  1. Phase & Pattern overview  2. Phase 1: OnePAM External LDD Upload  3. Phase 2: OnePAM Main LDD Update  4. Phase 3: add MADP  • Phase 3a: MADP External DD Upload  • Phase 3b: MADP Main DD Update  Part 2 – Phased approach & Patterns Part 1 – High-level architecture  1. OnePAM & MADP Detailed Architecture  2. Data fragmentation, Model Transformation,  Filtering & deduplication  3. OnePAM/MADP attribute mapping and  reading & updating  4. OnePAM API, OIL & Notifications  5. OnePAM Main LDD Involved Party  identification & Self-healing  6. MADP uploads  7. Human Process interaction  8. End-to-End architecture view  Part 3 – Detailed architecture  4 Part 1: High-Level  Architecture Table of Content  Part 1 – High-level architecture  1. Context & environment  2. Constraints & mitigation strategies  • Environmental constraints  • Mitigation strategies  3. High-level Architecture  • Data Distributor  • Data Refresher & Reconciler intro  • Data Refresher  • Data Reconciler  4. Architecture decisions, risks & open points  Part 2 – Phased approach & Patterns  1. Phase & Pattern overview  2. Phase 1: OnePAM External LDD Upload  3. Phase 2: OnePAM Main LDD Update  4. Phase 3: add MADP  • Phase 3a: MADP External DD Upload  • Phase 3b: MADP Main DD Update  Part 3 – Detailed architecture  1. OnePAM & MADP Detailed Architecture  2. Data fragmentation, Model Transformation,  Filtering & deduplication  3. OnePAM/MADP attribute mapping and  reading & updating  4. OnePAM API, OIL & Notifications  5. OnePAM Main LDD Involved Party  identification & Self-healing  6. MADP uploads  7. Human Process interaction  8. End-to-End architecture view  6 Context - Key business requirements*  • Import Party-related data files in different formats from  different (external) providers (Coface & Graydon) into the  Party Data Platform (OnePAM & MADP).  • Types of data files:  • Daily Delta files: vendor-indicated changed Party data  • (Monthly) refreshes: vendor provided full Party data sets  • Initial loads: initial full data set to populate the Party Platform  Data  • Reconciliations: differences between Party Data platform  External and Main zones.  • In the target format:  • Converted: mappings, transformations & quality mgd.  • Model transformed: Split composite Party records into  individual Parties and Relationships  • Upload changes in Party records  in “External” data stores of the  Party Data Platform (Landing zones):  • OnePAM: Parties, relationships & core attributes  • MADP: “Local” attributes  • Update Involved Party records in “Main” data stores with fine  grained attribute comparisons (policy driven)  • “Self-healing”: update different attributes between external  ingested Party data & Involved Party data in the Main zone if the  external data source attribute is master.  • Block propagation of some changed data to the Main Zone.  • All uploads to be finished before the start of the next business  day after receiving them.  • Ability to provide fine-grained configuration by Data Stewards  *to befinalized with documented work of Ellen Delagrange and Thomas Durieux (for example: Coface Legal  Entities).  7 Context - What data are we talking about?  ING BE ingests curated Party data from external suppliers (Coface, Greydon) on:  • Belgian Legal Entities (LE) (KBO, Operating Sites, Legal Representatives)  • Private Individuals (court appointed guardians, under administrations, private bankruptcies, …).  This external ingested Party data contains both:  • ING BE Involved Parties: customers, associated parties like legal representatives of customer LE’s, administrators of incapables that  are customers…  • Non-Involved Parties: have no direct relation with ING, like LE’s and legal representatives that are not customers  The target Party Data Platform, OnePAM, manages in principle only Involved Parties, aka “Core” data in a Main zone.  Non-Involved Party data* is important for ING BE during onboarding of a new customer (eg. validate the provided data for LEs), or to  block them (people under administration, upon bankruptcy) from becoming customer.  OnePAM provided ING BE with a segregated “External” (Landing) zone to store external ingested data that can include non-Involved  Party Data that conforms to the “Core” OnePAM model.  OnePAM doesn’t manage Party-associated ”Local” attribute data* relevant to ING BE only, the latter of which will be managed by the  Managed Auxiliary Data Platform (MADP).  Our ingested Party data can contain all of these. We must separate all these data types out of the ingested Party records and store  them correctly in the right OnePAM and MADP data store  8  * Formerly known as « Party Orphans » & «Data Orphans »  respectively Context - Input files: types of data, formats  There are 4 main ingested sources, each in different formats:  • Coface Legal Entities (incl Operating Sites) -XML –5-13k daily  • Coface Incapables –XML –150 daily  • Graydon Legal Representatives –Excel - ??? daily*  • Graydon Bankruptcies –CSV - < 100 daily.  A full refresh is ~3M records  Each of these files have different data quality:  • High: Coface Legal Entities (authoritative source: Moniteur  Belge/Staatsblad)  • Low: Graydon Legal Representatives (Graydon own curation without  a single legal source, and mixed data quality like missing addresses  of legal representatives)  
Some of the attributes in these files fits in the OnePAM “Core” model,  other data may be  considered “Local” and must be stored in MADP.  For data for which the external source is authoritative (fi. Legal it is  considered “master data” and we normally will overwrite data in the  OnePAM Main zone for Involved Parties if it is different.  Data Ingestor– DI  Ingested Party data with  new/changed Parties  Legal Entities & Operating Sites  Bankruptcies  Incapables  Legal Representatives  9  *Not automated today, comes in as excel file. 1. The “Data Ingestor” (DI) ingests data in the form of changed and new  Party data records*. These records are in different formats which are  defined by the information supplier.  • The DI archives the original content for data lineage, support & to ensure  only actually changed records are processed (efficiency).  2. Composite Party records with multiple parties & implicit relations will  be dissagregated into individual Party records.  3. The DI maps, reformats, converts, validates & adds business  conversions (not business rules) to the data entities.  4. The DI relies on ING Group platform tooling and repositories for its  functionalities (glued with python, whereas the Data Distributor will  be custom development (probably Java).  • Difference in technologies (and required team skill sets) is a reason to  segregate DD & DI both architecturally as organizationally.  • The Data Management tribe will implement the Data Ingestor.  5. The “ING formatted” DI output is input for the Data Distributor. The  full history of processed records is available in the ingest DB  10  Environment – Associated Component - The Data Ingestor (DI) as source  The Data Ingestor platform is architected by Els Van Opstal (here). Here we provide input to understand Data Distributor starting point  * Even when only a single attribute of a Party record changed, the whole Party record is provided but we don’t know which one.  The DI makes no connections to Customer Data Platforms like OnePAM/MADP because of separation-of-concerns & genericity Environment – Associated component OnePAM & MADP as targets  1. We store ingested Party* data that fits the Core OnePAM  model, in a read-only OnePAM External LDD**.  • Each Party is identified by a OnePAM “External” UUID.  2. We store “Local” attributes of Parties (with an “External”  UUID) in a dedicated MADP External Data Domain.  3. The External LDD & External Data Domain will be used by  Onboarding Customer Journeys as pre-check data. It is  considered a Landing zone to derive Main data from  4. OnePAM stores Involved Parties (IP) in 2 “Logical Data  Domains” (LDDs) collectively called “Main” LDD; one for  Private Individuals, one for Legal Entities.  • An Involved Party is identified by a OnePAM “Main” UUID.  (technically there is no distinction with “External” UUIDs).  5. MADP stores functionally-grouped “Local” attributes of IPs  (having a “Main” UUID) in “Data Domains” (DDs).  6. The Party data in the OnePAM External LDD & MADP External  DD is used to update Involved Parties in the OnePAM “Main”  LDD and MADP “Main” Data Domains.  7. All non-onboarding Customer Journeys using Involved Party  data will access the “Main” LDDs & Data Domains.  Only  Involved  Parties  Customer Journey  Onboarding Customer Journey  7  “Main” LDD  3  OnePAM  ING_BE LDD  4  Main UUID  External LDD  External UUID  3  External Data  Domain  (Ingested  Parties)  External UUID  MADP  7  5  Main Data  Domain A  (involved  parties)  Main  UUID  Main Data  Domain B  (involved  parties)  Main  UUID  6  ING_Shared_B  E LDD  6  1  Party & Core  attributes  2  Local  attr  Data Distributor- DD  Output  Ingested Party data, ING formatted,  enriched & Record splitted  Data Ingest- DI  * Ingested Parties contain both Involved Parties (where ING has a relationship, like customers etc), as non-involved Parties (where ING has no relationship).  ** Agreed between ING BE Customer Data and GCDM (who manages OnePAM “Core” data model). This is an architectural decision to be documented.  11 Context - 2 distinct phases: Upload and Update  Ingested Party  Record, ING  formatted &  enriched  Preprocess  Upload  Upload  OnePAM  External LDD  upload MADP  External DD  Upload  During the Upload phase we upload ingested Party data into OnePAM  External LDD for the “Core” attributes and into MADP External Data  Domain for “Local” attributes.  The External zones are considered “Landing zones”, master for ingested  Preprocess  Update  Update  OnePAM  Main LDD  Update MADP  Main DDs  Update  During the Update phase we update ingested Involved Party data into  OnePAM Main LDD for the “Core” attributes and into MADP Main Data  Domains for “Local” attributes.  We only update data in the Main zones that was successfully uploaded  Party data. Therefore, we must have certainty on what data was successfully  uploaded. This must happen before we update other stores from the same  data, like the Main zones.  In principle happens the upload in MADP after the upload in OnePAM  because “Local” attributes must have a OnePAM UUID attached, and we  only know that after we create Parties in OnePAM.  first into the External zones, and we will only update Involved Party data.  We not only update ingested attributes that changed but may also  overwrite existing unchanged ingested attributes in the Main zones which  were changed by other process if we are master for them.  Refreshes and updates are participating as preprocessing or input steps in the Upload & Update process respectively  12 Table of Content  Part 1 – High-level architecture  1. Context & environment  2. Constraints & mitigation strategies  • Environmental constraints  • Mitigation strategies  3. High-level Architecture  • Data Distributor  • Data Refresher & Reconciler intro  • Data Refresher  • Data Reconciler  4. Architecture decisions, risks & open points  Part 2 – Phased approach & Patterns  1. Phase & Pattern overview  2. Phase 1: OnePAM External LDD Upload  3. Phase 2: OnePAM Main LDD Update  4. Phase 3: add MADP  • Phase 3a: MADP External DD Upload  • Phase 3b: MADP Main DD Update  Part 3 – Detailed architecture  1. OnePAM & MADP Detailed Architecture  2. Data fragmentation, Model Transformation,  Filtering & deduplication  3. OnePAM/MADP attribute mapping and  reading & updating  4. OnePAM API, OIL & Notifications  5. OnePAM Main LDD Involved Party  identification & Self-healing  6. MADP uploads  7. Human Process interaction  8. End-to-End architecture view  13 Constraint 1: number of records to process  We start with an Initial load of each file in the production databases, which can  have millions of records and can take multiple days to finish.  Then we must process several files with changes per day, every day.  Some are smaller (10’s to 100’s of records) some larger (1000’s to low 10000’s  of records)  But on a periodic basis (monthly) we must do full refreshes and reconciliations  (millions of records).  Refreshes are external ingested files coming from the external supplier, but  contain the complete data set, rather than the daily delta’s. They are like initial  loads that you redo.  Reconciliations are, comparisons between the External and Main zones, where  the information in the External zones are considered “master” for some  attributes. It introduces no new data.  Bankruptcies  Operating Sites  Reconciliation    Initial loads &  Refreshes    OnePAM  Main  External  MADP  External  DD  Main  DD    Ingested  External Data  Daily Delta  & Refresh  14 Constraint
 
