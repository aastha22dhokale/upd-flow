  Provides models that drive  actions for each type of object  (LE, Sole trader, Individual, Legal  rep, incapable…), relationships  Exception handling  (IP2IP, hierarchical) and their  attributes (master, not-master Table of Content  Part 1 – High-level architecture  1. Context  2. Constraints & mitigation strategies  • Environmental constraints  • Mitigation strategies  3. High-level Architecture  • Data Distributor  • Data Refresher & Reconciler intro  • Data Refresher  • Data Reconciler  4. Architecture decisions, risks & open points  Part 2 – Phased approach & Patterns  1. Phase & Pattern overview  2. Phase 1: OnePAM External LDD Upload  3. Phase 2: OnePAM Main LDD Update  4. Phase 3: add MADP  • Phase 3a: MADP External DD Upload  • Phase 3b: MADP Main DD Update  Part 3 – Detailed architecture  1. OnePAM & MADP Detailed Architecture  2. Data fragmentation, Model Transformation,  Filtering & deduplication  3. OnePAM/MADP attribute mapping and  reading & updating  4. OnePAM API, OIL & Notifications  5. OnePAM Main LDD Involved Party  identification & Self-healing  6. MADP uploads  7. Human Process interaction  8. End-to-End architecture view  30 Introducing Data Refresher (DRF) & Data Reconciler (DRC)  Refreshes are external ingested files coming from the external supplier, but  contain the complete data set, rather than the daily delta’s. They are like initial  loads that you regularly redo, but on an already existing body of data.  It is a “vertical” movement of data, from the supplier to the Data Ingestor to the  Data Distributor to the OnePAM & MADP External zones.  Reconciliations are comparisons between the OnePAM & MADP External and  Main zones, where the information in the External zones are considered “master”  for some attributes. It introduces no new data.  It is a “horizontal” movement of data from the External Zones to the Main zones.  While complete data sets with millions of records must be compared, we are  only interested in updating the differences between the refreshes & the External  zones data, and, for reconciliation, the External zones & the Main zones data.  • The Refresher: compares external  ingested full datasets with what is in  the UDL copied OnePAM/MADP  External zones and extracts deltas.  • The Reconciler: compares the data  between the in the UDL copied  OnePAM/MADP External and Main  zones and extracts deltas.  • Deltas are processed by the Data  Distributor as if daily deltas.  31 Table of Content  Part 1 – High-level architecture  1. Context  2. Constraints & mitigation strategies  • Environmental constraints  • Mitigation strategies  3. High-level Architecture  • Data Distributor  • Data Refresher & Reconciler intro  • Data Refresher  • Data Reconciler  4. Architecture decisions, risks & open points  Part 2 – Phased approach & Patterns  1. Phase & Pattern overview  2. Phase 1: OnePAM External LDD Upload  3. Phase 2: OnePAM Main LDD Update  4. Phase 3: add MADP  • Phase 3a: MADP External DD Upload  • Phase 3b: MADP Main DD Update  Part 3 – Detailed architecture  1. OnePAM & MADP Detailed Architecture  2. Data fragmentation, Model Transformation,  Filtering & deduplication  3. OnePAM/MADP attribute mapping and  reading & updating  4. OnePAM API, OIL & Notifications  5. OnePAM Main LDD Involved Party  identification & Self-healing  6. MADP uploads  7. Human Process interaction  8. End-to-End architecture view  32 Refresh OnePAM & MADP : Exploit DD UUID as common UUID  Step 1: Start situation  Step 2: add DD UUID to OnePAM refresh  Step 3: enrich MADP Refresh  with External UUID  Step 4: compare using matching  UUIDs  During refresh we must compare  attributes between the:  • OnePAM External LDD & MADP  External DD and  • the Parties & relationships in  the refresh file  The problem is that there is no  common key of comparison  between External Zones & records  in the refresh file.  We use the DD UUID as a common key and  the Data Distributor which has all the entity  matching information for the OnePAM  External LDD.  We load the refresh file to the DD doing  entity matching, adding the DD UUID to  matching records. New Parties from the  refresh file create new DD UUIDs.  We split* the refresh file in OnePAM and  MADP parts & can compare the OnePAM  External LDD with the OnePAM refresh part,  using the DD UUID to enrich it with the  External UUID.  To support comparing the MADP  refresh & External DD parts, we  have enriched the OnePAM refresh  part with the External UUID from  the OnePAM External LDD.  Then we compare the DD UUIDs of  the OnePAM and MADP refresh  parts and enrich the MADP refresh  part with the External UUID.  We can now compare the Party  Core attributes and relationships of  the OnePAM External LDD with the  OnePAM refresh using either DD  UUID or External UUID as key.  We can also now compare the  “Local” attributes of the MADP  External DD with the MADP refresh  using the External UUID as key  33  * We split up the OnePAM & MADP refresh parts in the Data Distributor which has all the context information. This is before matching wither External UUIDs, which happens in the Refresher. We don’t  want the Refresher to “know” the difference between Core and Local attributes for code duplication avoidance. It just compares different sources.  Full (high-level) architecture of the Data Refresher  1. Data Distributor reads refresh file, entity matches, adding  DD UUID (creates if new Party) & splits into OnePAM Core  attributes and MADP Local attributes.  2. DD uploads files to Data Refresher (DRF).  3. DRF obtains UDL extracts of OnePAM External LDD &  MADP External Data Domain.  Data  Steward Tool  Event  Layer  4  6  Comparison tables  5  4. DRF compares OnePAM External LDD extract with OnePAM  part of the refresh file using DD UUID as key.  5. DRF enriches the MADP part of the refresh file with  External UUID from OnePAM External LDD UDL extract  using DD UUID as common key  Data Refresher (DRF)  (May contain Polygraph)  Input  2  7  Refresher delta  file OnePAM with  External UUID  6. It then compares (Polygraph?) MADP External DD extract  with MADP refresh file using External UUID as common key  7. Delta OnePAM & MADP files with changed Parties,  attributes  & External UUID are send back to DD.  8. DD continues to upload the OnePAM and MADP External  Zones  9. All updates generate events that update the UDL  Refresher formatted  files with DD UUID for  OnePAM  Refresher formatted  files for MADP  Refresher delta  file MADP with  External UUID  Data Distributor (DD)  1  Refresh file  Data Ingest- DI  Unite Data Lake  (UDL)  MADP External  DD  External UUID  3  OnePAM  External LDD  Retrieve  External UUID  & DD UUID  MADP  External Data  Domain  (Ingested  Parties)  9  OnePAM  External LDD  8  8  The Data Refresher acts like a bypass for the Data Distributor to reduce the size of the refresh files to similar as  for daily uploads but keeping the overall flow the same  as for daily uploads  34 The architecture of the Data Refresher is very similar to the one of  the Data Distributor (DD).  With a modular approach it could be embedded in the same  codebase as the Data Distributor where its specificities are modeled  in separate modules:  • It ingests different input files from the Data Distributor, as well as  from the UDL.  • It has a different, complementary refresh flow than the DD.  • It doesn’t do entity matching, but it does key-matching & addition  • It uses different tables 
• It doesn’t track response events  • It does similar delta verifications on attributres.  • Sends files back to DD, not OnePAM/MADP  Functional architecture of the Data Refresher  35  Data Refresher  Input Interfaces Output Interfaces  File API File API  Data Distribution flow orchestrator  DB  Parametrization  Configuration  management  Policy  management  Data Management Object Modeling  Party  management  Relationship  management  Attribute  management  Exception handling  Exception  management  Input file management  Output file management  API management  Database management  Refresh 2  Event management  Event  In a multi-instance deployed setup, one of the  deployed Data Distributors could take the role of  Data Refresher. Table of Content  Part 1 – High-level architecture  1. Context  2. Constraints & mitigation strategies  • Environmental constraints  • Mitigation strategies  3. High-level Architecture  • Data Distributor  • Data Refresher & Reconciler intro  • Data Refresher  • Data Reconciler  4. Architecture decisions, risks & open points  Part 2 – Phased approach & Patterns  1. Phase & Pattern overview  2. Phase 1: OnePAM External LDD Upload  3. Phase 2: OnePAM Main LDD Update  4. Phase 3: add MADP  • Phase 3a: MADP External DD Upload  • Phase 3b: MADP Main DD Update  Part 3 – Detailed architecture  1. OnePAM & MADP Detailed Architecture  2. Data fragmentation, Model Transformation,  Filtering & deduplication  3. OnePAM/MADP attribute mapping and  reading & updating  4. OnePAM API, OIL & Notifications  5. OnePAM Main LDD Involved Party  identification & Self-healing  6. MADP uploads  7. Human Process interaction  8. End-to-End architecture view  36 Reconciliation OnePAM & MADP: exploit DD UUID as common UUID  Step 1: Start situation  Step 2: add DD UUID to Main LDD extract  Step 3: enrich MADP DDs with DD UUID  Step 4: reconcile using DD UUID to match  During reconciliation we must  compare attributes between:  • The OnePAM Main LDD and  OnePAM External LDD  • The MADP External DD and  MADP Main DDs  The challenge is that there is no  common key of comparison  between External & Main data  stores.  This is especially an issue with  MADP where also the attributes  are different between External &  Main DDs.  We will then use the External  UUID as a common key between  OnePAM External LDD and MADP  External DD to enrich MADP  External DD with the DD UUID.  We will use the DD UUID as a  common key and use the Data  Distributor which has all the entity  matching information for the  OnePAM External LDD, which is  what we want to compare with.  We extract the OnePAM Main LDD  to the DD that does entity  matching and adds the DD UUID to  matching records. Unmatched  records are dropped as they are  not in the External LDD.  We will use the External UUID as  a common key between OnePAM  Main LDD and MADP Main DDs  to enrich MADP Main DDs with  the DD UUID  We now reconcile OnePAM Main  LDD & OnePAM External LDD by  matching DD UUID and comparing  the attributes the External LDD is  master for with matching Main LDD  attributes.  We do the same for the MADP  External DD & MADP Main Data  Domains, matching the DD UUIDs.  We must transform External DD  attributes into Main DD attributes  as their models are different.  37  * Over time the Main LDD will also have the External UUID as an Internal Identifier but that is through daily updates, not through reconciliation (unless we want a giant reconciliation).  Unite Data Lake (UDL)  OnePAM Main LDD  OnePAM  MADP Main DD  MADP Main DD  MADP Main DD  MADP  1. Data Distributor reads extract of OnePAM Main LDD from  the UDL, entity matches & adds DD UUID on matched  records, removing non-matching records (not in External  LDD).  2. DD uploads DD UUID-tagged & Main LDD extract files to  the Data Reconciler (DRC).  3. DRC gets OnePAM External LDD, MADP External DD &  MADP Main DDs extracts from UDL.  4. OnePAM Main & External LDD are stored in Comparison  tables to be directly compared using the DD UUID with  deltas written in the Result tables. (Polygraph?)  5. MADP External & Main DDs are first stored in Mapping  tables. We enrich them with DD UUIDs, by mapping their  External/Main UUIDs on the OnePAM External & Main  LDD extracts in the Comparison tables. We delete records  with no matches.  6. DRC compares MADP External & Main DDs using the DD  UUID with deltas written to the Result tables.  7. DRC creates delta files for OnePAM & MADP Main zones &  sends them back to the Data Distributor.  8. DD updates the OnePAM & MADP Main zones.  9. All updates generate events that update the UDL  Full architecture of the Data Reconciler  38  Data Distributor (DD)  Data Reconciler (DRC)  (May contain Polygraph)  Main LDD  Main Data  Domains  Comparison tablesMapping tables Result tables  4 6 5  9  Main Data  Domains Main Data  Domains  OnePAM ExternalLDD  MADPExternalDD  Input  Main LDD extract  ~xxM  Extract  Extract  Reconciler  formatted files for  OnePAM  Reconciler  formatted files with  DD UUID for  OnePAM  Reconciler  MADP delta  files  Reconciler  MADP delta  files  Mapping  Configuration  Reconciler  OnePAM  delta file  1 2  3  3  3  4  7 8  Data Steward  Tool  Event Layer The architecture of the Data Reconciler is very similar to the one of the  Data Distributor (DD).  With a modular approach it could be embedded in the same codebase as  the Data Distributor where its specificities are modeled in separate  modules:  • It ingests different input files from the Data Distributor, as well as from  the UDL.  • It has a different, complementary reconciliation flow than the DD.  • It doesn’t do entity matching, but it does key-matching & addition  • It uses different tables  • It doesn’t track response events  • It does similar delta verifications on attributes.  • Sends files back to DD, not OnePAM/MADP  Functional architecture of the Data Reconciler  39  Data Distributor  Input Interfaces Output Interfaces  File API File API Event  Data Distribution flow orchestrator  DB  Parametrization  Configuration  management  Policy  management  Data Management Object Modeling  Party  management  Relationship  management  Attribute  management  Exception handling  Exception  management  Input file management  Output file management  Event management  API management  Database management  Reconciliation 2  In a multi-instance deployed setup, one of the  deployed Data Distributors could take the role of  Data Reconciler. Table of Content  Part 1 – High-level architecture  1. Context  2. Constraints & mitigation strategies  • Environmental constraints  • Mitigation strategies  3. High-level Architecture  • Data Distributor  • Data Refresher & Reconciler intro  • Data Refresher  • Data Reconciler  4. Architecture decisions, risks & open points  Part 2 – Phased approach & Patterns  1. Phase & Pattern overview  2. Phase 1: OnePAM External LDD Upload  
