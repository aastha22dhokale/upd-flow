
package com.ing.datadist.api.payload;

import com.ing.datadist.api.model.*;

import com.ing.datadist.domain.OrganisationUnitDomainWrapper;

import java.time.ZonedDateTime;

import java.time.format.DateTimeFormatter;

public class PayloadFactory {

    // NAME UPDATE

    public static UpdateOrganisationUnitNameV5Request buildUpdateNamePayload(

            OrganisationUnitDomainWrapper wrapper) {

        return UpdateOrganisationUnitNameV5Request.builder()

                .organisationUnitName(wrapper.getOrganisationUnitName())

                .effectiveDate(ZonedDateTime.now().format(DateTimeFormatter.ISO_OFFSET_DATE_TIME))

                .dataSource(wrapper.getRecordActionType())

                .build();

    }


    // POSTAL ADDRESS UPDATE (PATCH SOFT CLOSE)

    public static UpdatePostalAddressV5Request buildUpdatePostalPayload(

            OrganisationUnitDomainWrapper wrapper) {

        return UpdatePostalAddressV5Request.builder()

                .streetName(wrapper.getPostalAddressStreetNm())

                .houseNumber(wrapper.getPostalAddressHouseNum())

                .houseNumberAddition(wrapper.getPostalAddressHouseAdd())

                .postalCode(wrapper.getPostalAddressPostalCd())

                .cityName(wrapper.getPostalAddressCityName())

                .countryCode(wrapper.getPostalAddressCntryCd())

                .effectiveDate(ZonedDateTime.now().format(DateTimeFormatter.ISO_OFFSET_DATE_TIME))

                .dataSource(wrapper.getRecordActionType())

                .build();

    }


    // DIGITAL ADDRESS UPDATE

    public static UpdateDigitalAddressV5Request buildUpdateDigitalPayload(

            OrganisationUnitDomainWrapper wrapper) {

        return UpdateDigitalAddressV5Request.builder()

                .fullDigitalAddress(wrapper.getDigitalAddrEmail())

                .effectiveDate(ZonedDateTime.now().format(DateTimeFormatter.ISO_OFFSET_DATE_TIME))

                .endDate("2050-12-12T23:59:59.999+02:00")

                .deliveryFailureReasonType("ADR_NOT_EXST")

                .dataSource(wrapper.getRecordActionType())

                .build();

    }

}


